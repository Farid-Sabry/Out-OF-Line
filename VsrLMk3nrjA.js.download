;/*FB_PKG_DELIM*/

__d("WAWebDialerPadFlowLoadable",["JSResourceForInteraction","WAWebLazyLoadedRetriable","WAWebLoadable","WAWebLoadingDrawer.react","asyncToGeneratorRuntime","react"],(function(a,b,c,d,e,f,g){var h,i=h||c("react");a=c("WAWebLazyLoadedRetriable")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield c("JSResourceForInteraction")("WAWebDialerPadFlow.react").__setRef("WAWebDialerPadFlowLoadable").load());return a.DialerPadFlow}),"DialerPadFlow");d=c("WAWebLoadable")({loader:a,loading:function(a){return i.jsx(c("WAWebLoadingDrawer.react"),{error:Boolean(a.error)})}});g.requireBundle=a;g.WAWebDialerPadFlowLoadable=d}),98);
__d("WAWebDialerPadGatingUtils",["WAWebABProps"],(function(a,b,c,d,e,f,g){function a(){return d("WAWebABProps").getABPropConfigValue("dialer_pad_for_new_chats")}g.isDialerPadForNewChatEnabled=a}),98);
__d("WAWebNewChatDrawer.react",["fbt","WAWebAccountTakeOverBanner.react","WAWebBox.react","WAWebCallDialerRefreshedIcon.react","WAWebCellBorder.react","WAWebCellV2.react","WAWebChatContactList.react","WAWebChatListSearch.react","WAWebCmd","WAWebCommunityGatingUtils","WAWebComposeBoxActions","WAWebContactCollection","WAWebContactGetters","WAWebContactManagementGating","WAWebContactlessChatUtils","WAWebDefaultAddProfilePicture.react","WAWebDialerPadGatingUtils","WAWebDrawer.react","WAWebDrawerBody.react","WAWebDrawerHeader.react","WAWebDrawerManager","WAWebDrawerViewType","WAWebEmptyState.react","WAWebFbtCommon","WAWebFindChatAction","WAWebFlatListController","WAWebFocusIndicator","WAWebKeyboardHotKeys.react","WAWebL10N","WAWebMenuBar.react","WAWebModalManager","WAWebNewChatMetricUtils","WAWebPhoneNumberSearch","WAWebReachoutTimelockActions","WAWebReachoutTimelockButterBarLoadable.react","WAWebReachoutTimelockRestrictedModalLoadable","WAWebReachoutTimelockUtils","WAWebTabOrder","WAWebText.react","WAWebUIRefreshGatingUtils","WAWebUISpacing","WAWebUnknownContactSection.react","WAWebUseContactManagementAvailability","WAWebUserPrefsMeUser","WAWebUsernameGatingUtils","WAWebUsernamePinVerificationFlow","WAWebWamEnumWebContactListStartNewChatType","WDSMenuBarItem.react","asyncToGeneratorRuntime","react","useLazyRef","useWAWebABPropConfigValue","useWAWebDebouncedCallback","useWAWebForceUpdate","useWAWebListener","useWAWebStableCallback","useWAWebUnknownContact"],(function(a,b,c,d,e,f,g,h){var i=["ref"],j,k;e=k||d("react");var l=j||(j=c("react")),m=e.useCallback,n=e.useRef,o=e.useState,p={atoBanner:{paddingTop:"x1cnzs8",paddingBottom:"x1a8lsjc",marginTop:"x1kgmq87",marginBottom:"xmgb6t1",backgroundColor:"x150wa6m",zIndex:"xyw6214",position:"x1n2onr6",$$css:!0}};function q(a){var b=a.image,e=a.onClick,f=a.primary,g=a.ref;a=a.testid;a=h._(/*BTDS*/"{item-title}",[h._param("item-title",f.toString())]);return l.jsxs(d("WAWebBox.react").Box,{padding:d("WAWebUIRefreshGatingUtils").uiRefreshM1Enabled()?[0,8]:null,children:[l.jsx(d("WAWebCellV2.react").CellV2,{ref:g,size:"medium",material:d("WAWebUIRefreshGatingUtils").uiRefreshM1Enabled(),detailLeft:b,detailLeftXStyle:[d("WAWebUISpacing").uiPadding.start13],primary:l.jsxs(d("WAWebText.react").WAWebTextTitle,{children:[f," "]}),onClick:e,ariaLabel:a,testid:void 0}),!d("WAWebUIRefreshGatingUtils").uiRefreshM1Enabled()&&l.jsx(c("WAWebCellBorder.react"),{})]})}q.displayName=q.name+" [from "+f.id+"]";function a(a){var e=a.ref;a=babelHelpers.objectWithoutPropertiesLoose(a,i);var f=a.title,g=a.onBack,j=a.onClick,k=a.onNewGroup,r=a.onNewCommunity,s=a.onNewContact,t=a.onDialerPad;a=a.viewType;var u=o(""),v=u[0],w=u[1];u=o(d("WAWebReachoutTimelockUtils").isUserReachoutTimelockedAndVisible());var x=u[0],y=u[1];u=n();var z=n(),A=n(),B=Boolean(v),C=c("useLazyRef")(function(){return new(c("WAWebFlatListController"))()}),D=d("useWAWebABPropConfigValue").useABPropConfigValue("wds_web_button"),E=d("WAWebUsernameGatingUtils").usernameContactlessChatEnabled(),F=h._(/*BTDS*/"Search contacts"),G=d("useWAWebForceUpdate").useForceUpdateDONOTUSE();d("useWAWebListener").useListener(d("WAWebContactCollection").ContactCollection,"change:name",G);d("useWAWebListener").useListener(d("WAWebCmd").Cmd,"reachout_timelock_state_change",function(){y(d("WAWebReachoutTimelockUtils").isUserReachoutTimelockedAndVisible())});G=d("WAWebUseContactManagementAvailability").useAccountIntegrityState();E?F=c("WAWebFbtCommon")("Search name, number or username"):F=c("WAWebFbtCommon")("Search name or number");var H=m(function(a){d("WAWebContactCollection").ContactCollection.ensureSorted();a=typeof a==="string"?a:v;if(!a)return d("WAWebContactCollection").ContactCollection.getFilteredContacts({showMe:!!a,includeLidContacts:!1});var b=d("WAWebContactCollection").ContactCollection.getFilteredContacts({showMe:!!a,includeLidContacts:!1}).concat(d("WAWebContactCollection").ContactCollection.filter(function(a){return a.name&&!d("WAWebContactGetters").getIsMe(a)&&!d("WAWebContactGetters").getIsPSA(a)&&!d("WAWebContactGetters").getIsWAContact(a)&&!d("WAWebContactGetters").getIsNewsletter(a)&&!d("WAWebContactGetters").getIsBot(a)})),e=c("WAWebL10N").accentFold(a),f=d("WAWebPhoneNumberSearch").numberSearch(e);return b.filter(function(a){return a.searchMatch(e,f)})},[v]);E=H();d("WAWebReachoutTimelockActions").maybeSetCanSendMsgWhileTimelockedProp(E);var I=E.length===0;I=c("useWAWebUnknownContact")({phoneOrUsername:v,searchPhoneNumber:I,searchUsername:I});var J=I.unknownContactInfo,K=I.loading,L=I.error;I=I.onRetry;var M=c("useWAWebDebouncedCallback")(function(a){return w(a)},100),N=m(function(a){A.current=a,M(a)},[M]),O=m(function(a,b,d){c("WAWebFocusIndicator").shouldIndicateFocus(),j(a,b,void 0,d)},[j]),P=c("useWAWebStableCallback")(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b;a.preventDefault();a.stopPropagation();if(J==null)return;if((J==null?void 0:J.wid)==null){J;a=(yield d("WAWebUsernamePinVerificationFlow").usernamePinVerificationFlow(J.username,{initWithError:J.triedPin}));if(a==null)return}else a=J.wid;b=(b=J==null?void 0:J.chat)!=null?b:(yield d("WAWebFindChatAction").findOrCreateLatestChat(a,"newChatFlow")).chat;if(d("WAWebReachoutTimelockUtils").isUserReachoutTimelocked()&&!d("WAWebReachoutTimelockUtils").canSendMsgWhileTimelocked({chat:b,contact:b.contact})){d("WAWebModalManager").ModalManager.open(l.jsx(d("WAWebReachoutTimelockRestrictedModalLoadable").ReachoutTimelockRestrictedModalLoadable,{}));return}d("WAWebDrawerManager").DrawerManager.closeDrawerLeft();a=(yield d("WAWebCmd").Cmd.openChatFromUnread(b));if(!a)return;d("WAWebNewChatMetricUtils").logInitiatedContactlessChat(b);d("WAWebNewChatMetricUtils").logContactListStartNewChatAction({chatType:d("WAWebWamEnumWebContactListStartNewChatType").WEB_CONTACT_LIST_START_NEW_CHAT_TYPE.CONTACTLESS,isSearchResult:!0});d("WAWebComposeBoxActions").ComposeBoxActions.focus(b)});return function(b){return a.apply(this,arguments)}}()),Q=m(function(a){a.preventDefault();a.stopPropagation();if(!B){var b=d("WAWebContactCollection").ContactCollection.assertGet(d("WAWebUserPrefsMeUser").getMeUser());O(a,b);return}b=H(A.current)[0];if(b){O(a,b);return}else J&&void P(a)},[B,H,J,O,P]),R=[];if(!v){var S=l.jsx(d("WAWebDefaultAddProfilePicture.react").DefaultAddProfilePicture,{directional:!0,type:"group",size:48});R.push({image:S,id:h._(/*BTDS*/"New group"),onClick:k,testid:"new-chat-drawer-new-group-cell"});if(d("WAWebContactManagementGating").contactManagementEnabled()){S=l.jsx(d("WAWebDefaultAddProfilePicture.react").DefaultAddProfilePicture,{directional:!0,type:"contact",size:48});k=h._(/*BTDS*/"New contact");R.push({image:S,id:k,onClick:s,testid:"new-chat-drawer-new-contact-cell"})}if(d("WAWebCommunityGatingUtils").communitiesCreationEnabled()){S=l.jsx(d("WAWebDefaultAddProfilePicture.react").DefaultAddProfilePicture,{directional:!0,type:"community",size:48});R.push({image:S,id:h._(/*BTDS*/"New community"),onClick:r,testid:"new-chat-drawer-new-community-cell"})}}k=null;G===d("WAWebUseContactManagementAvailability").AccountIntegrityState.TIMELOCK&&(k=l.jsx(d("WAWebAccountTakeOverBanner.react").AccountTakeOverBanner,{entryPoint:"new-chat",xstyle:p.atoBanner}));E.length===0&&!!v?K?s=l.jsx(d("WAWebEmptyState.react").SearchingNonContactWithSpinner,{}):L?s=l.jsx(d("WAWebEmptyState.react").SearchingNonContactError,{error:d("WAWebContactlessChatUtils").getErrorStr(L),onClick:I}):J?s=l.jsx(c("WAWebUnknownContactSection.react"),{contactInfo:J,onUnknownContactClick:P,searchText:v}):s=l.jsx(d("WAWebEmptyState.react").SearchWithKeyword,{keyword:v}):s=l.jsx(c("WAWebChatContactList.react"),{ref:z,contacts:E,flatListController:C.current,onClick:j,showMe:!B,showBot:!B,showPersonGroupDivisionHeader:!0,showHeaderSpinner:G===d("WAWebUseContactManagementAvailability").AccountIntegrityState.PENDING});S=a===c("WAWebDrawerViewType").FLYOUT?d("WAWebDrawerHeader.react").DRAWER_HEADER_TYPE.FLYOUT:d("WAWebDrawerHeader.react").DRAWER_HEADER_TYPE.SMALL;var T=n(null),U=n([]),V=function(a,b){U.current[b]=a};r=function(a){if(a.target!==T.current)return;X(0)};var W=function(){var a=U.current.findIndex(function(a){return a===document.activeElement});return a!==-1?a:null},X=function(a){a=U.current[a];a&&a.focus()},Y=function(a){a.preventDefault();a=W();if(a==null){X(0);return}a=Math.min(a+1,R.length-1);X(a)},Z=function(a){a.preventDefault();a=W();if(a==null){X(0);return}a=Math.max(0,a-1);X(a)};L={up:function(a){return Z(a)},down:function(a){return Y(a)}};I=null;d("WAWebDialerPadGatingUtils").isDialerPadForNewChatEnabled()&&(I=D?l.jsx(c("WDSMenuBarItem.react"),{testid:void 0,icon:d("WAWebCallDialerRefreshedIcon.react").CallDialerRefreshedIcon,onClick:t,title:"Call",tabOrder:d("WAWebTabOrder").TAB_ORDER.CHATLIST_HEADER},"btn-dialer-pad"):l.jsx(d("WAWebMenuBar.react").MenuBarItem,{testid:void 0,tabOrder:d("WAWebTabOrder").TAB_ORDER.CHATLIST_HEADER,icon:l.jsx(d("WAWebCallDialerRefreshedIcon.react").CallDialerRefreshedIcon,{}),title:"Call",onClick:t},"btn-dialer-pad"));return l.jsxs(c("WAWebDrawer.react"),{ref:e,testid:void 0,viewType:a,children:[l.jsx(d("WAWebDrawerHeader.react").DrawerHeader,{title:f,type:S,onBack:a===c("WAWebDrawerViewType").FLYOUT?void 0:g,menu:[I]}),l.jsx(d("WAWebChatListSearch.react").ListSearch,{ref:u,onSearch:N,onEnter:Q,placeholder:F,type:d("WAWebChatListSearch.react").ListSearchType.NEW_CHAT_CONTACT_SEARCH,loading:K,showPlaceholderUntilType:!0,focusOnMount:!0}),l.jsxs(c("WAWebDrawerBody.react"),{backgroundColor:"default",flatListControllers:[C.current],children:[x&&l.jsx(d("WAWebReachoutTimelockButterBarLoadable.react").ReachoutTimelockButterBarLoadable,{}),l.jsx(d("WAWebKeyboardHotKeys.react").HotKeys,{ref:T,handlers:L,tabIndex:0,"data-tab":d("WAWebTabOrder").TAB_ORDER.CHAT_LIST_FILTER,onFocus:r,children:R.map(function(a,b){var c=a.image,d=a.id,e=a.onClick;a=a.testid;return l.jsx(q,{ref:function(a){return V(a,b)},image:c,primary:d,onClick:e,testid:void 0},b)})}),k,s]})]},"contact-modal")}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("WAWebNewChatFlowTypes",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum").Mirrored(["NewChatDrawer","NewCommunityFlow","NewGroupFlow","NewContactFlow","DialerPadFlow"]);f.NewChatFlowStep=a}),66);
__d("WAWebNewChatFlow.react",["fbt","WAWebChatGetters","WAWebCmd","WAWebCommunityCreationFlowMetricUtils","WAWebComposeBoxActions","WAWebContactCollection","WAWebContactEditDrawer.react","WAWebContactEditUtils","WAWebContactGetters","WAWebContactLogging","WAWebDialerPadFlowLoadable","WAWebDrawerViewType","WAWebFindChatAction","WAWebMessageYourselfMetricUtils","WAWebModal.react","WAWebModalManager","WAWebNativeContactsNuxPopup.react","WAWebNewChatDrawer.react","WAWebNewChatFlowTypes","WAWebNewChatMetricUtils","WAWebNewCommunityInfoDrawer.react","WAWebNewGroupFlowLoadable","WAWebReachoutTimelockRestrictedModalLoadable","WAWebReachoutTimelockUtils","WAWebWamEnumCommunityCreationCurrentScreenType","WAWebWamEnumCommunityCreationEntrypointType","WAWebWamEnumWebContactListStartNewChatType","asyncToGeneratorRuntime","react","useWAWebFlow","useWAWebListener"],(function(a,b,c,d,e,f,g,h){var i,j,k=j||c("react"),l=(i||(i=d("react"))).useRef;function a(a){var e=a.onEnd,f=a.ref,g=a.viewType;d("WAWebContactCollection").ContactCollection.ensureSorted();var i=l();a=d("useWAWebFlow").useFlow(d("WAWebNewChatFlowTypes").NewChatFlowStep.NewChatDrawer,{transitions:d("useWAWebFlow").FlowTransitions.DrawerRight,onEnd:e});e=a[0];var j=a[1];a=function(){j.end()};d("useWAWebListener").useListener(d("WAWebCmd").Cmd,"end_flow",a);var m=function(a,b,c){c===void 0&&(c=!1);var e={};a.isEnterprise&&a.privacyMode!=null&&(e.nextPrivacyMode=a.privacyMode);void d("WAWebFindChatAction").findOrCreateLatestChat(a.id,b!=null?b:"newChatFlow",e).then(function(b){var e=b.chat;if(d("WAWebReachoutTimelockUtils").isUserReachoutTimelocked()&&!d("WAWebReachoutTimelockUtils").canSendMsgWhileTimelocked({chat:e,contact:e.contact})){d("WAWebModalManager").ModalManager.open(k.jsx(d("WAWebReachoutTimelockRestrictedModalLoadable").ReachoutTimelockRestrictedModalLoadable,{}));return}d("WAWebCmd").Cmd.openChatFromUnread(e).then(function(b){if(!b)return;b=d("WAWebChatGetters").getIsGroup(e)?d("WAWebWamEnumWebContactListStartNewChatType").WEB_CONTACT_LIST_START_NEW_CHAT_TYPE.GROUP:d("WAWebWamEnumWebContactListStartNewChatType").WEB_CONTACT_LIST_START_NEW_CHAT_TYPE.CONTACT;d("WAWebNewChatMetricUtils").logContactListStartNewChatAction({chatType:b,isSearchResult:d("WAWebChatGetters").getIsGroup(e)||c});d("WAWebContactGetters").getIsMe(a)&&d("WAWebMessageYourselfMetricUtils").UiMessageYourselfNewChatAction.logMessageYourselfOpenedEvent(e,c);d("WAWebComposeBoxActions").ComposeBoxActions.focus(e)});j.end()})};a=function(a,b,c,d){c===void 0&&(c=!1),m(b,d,c)};var n=function(a){a=d("WAWebContactCollection").ContactCollection.assertGet(a);m(a,"createContact");g===c("WAWebDrawerViewType").FLYOUT?d("WAWebModalManager").ModalManager.close():j.end()},o=function(a){if(d("WAWebReachoutTimelockUtils").isUserReachoutTimelocked()){d("WAWebModalManager").ModalManager.open(k.jsx(d("WAWebReachoutTimelockRestrictedModalLoadable").ReachoutTimelockRestrictedModalLoadable,{}));return}g===c("WAWebDrawerViewType").FLYOUT?(j.end(),d("WAWebModalManager").ModalManager.open(k.jsx(d("WAWebModal.react").Modal,{type:d("WAWebModal.react").ModalTheme.Tower,children:k.jsx(d("WAWebNewGroupFlowLoadable").NewGroupFlowLoadable,{onCreateGroup:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield a,d("WAWebModalManager").ModalManager.close()});return function(b){return a.apply(this,arguments)}}(),onEnd:function(){d("WAWebModalManager").ModalManager.close()},viewType:c("WAWebDrawerViewType").MODAL})}))):j.push(d("WAWebNewChatFlowTypes").NewChatFlowStep.NewGroupFlow)},p=function(a){g===c("WAWebDrawerViewType").FLYOUT?(j.end(),d("WAWebModalManager").ModalManager.open(k.jsx(d("WAWebModal.react").Modal,{type:d("WAWebModal.react").ModalTheme.Tower,children:k.jsx(c("WAWebNewCommunityInfoDrawer.react"),{onCreateCommunity:function(){d("WAWebModalManager").ModalManager.close()},viewType:c("WAWebDrawerViewType").MODAL,onCancel:function(){d("WAWebModalManager").ModalManager.close()}})}))):j.push(d("WAWebNewChatFlowTypes").NewChatFlowStep.NewCommunityFlow),d("WAWebCommunityCreationFlowMetricUtils").UiCommunityCreationAction.startSession(d("WAWebWamEnumCommunityCreationEntrypointType").COMMUNITY_CREATION_ENTRYPOINT_TYPE.CHATS_TAB),d("WAWebCommunityCreationFlowMetricUtils").UiCommunityCreationAction.enter(d("WAWebWamEnumCommunityCreationCurrentScreenType").COMMUNITY_CREATION_CURRENT_SCREEN_TYPE.CHATS_TAB)},q=function(a){if(d("WAWebContactEditUtils").shouldShowNativeContactsNux()){d("WAWebModalManager").ModalManager.open(k.jsx(d("WAWebNativeContactsNuxPopup.react").NativeContactsNuxPopup,{source:d("WAWebContactLogging").ContactSourceType.NewChat}));return}g===c("WAWebDrawerViewType").FLYOUT?(j.end(),d("WAWebModalManager").ModalManager.open(k.jsx(d("WAWebModal.react").Modal,{type:d("WAWebModal.react").ModalTheme.Tower,children:k.jsx(c("WAWebContactEditDrawer.react"),{ref:i,origin:d("WAWebContactLogging").ContactSourceType.NewChat,onSave:n,viewType:c("WAWebDrawerViewType").MODAL,onCancel:function(){d("WAWebModalManager").ModalManager.close()}})}))):j.push(d("WAWebNewChatFlowTypes").NewChatFlowStep.NewContactFlow)},r=function(a){if(d("WAWebReachoutTimelockUtils").isUserReachoutTimelocked()){d("WAWebModalManager").ModalManager.open(k.jsx(d("WAWebReachoutTimelockRestrictedModalLoadable").ReachoutTimelockRestrictedModalLoadable,{}));return}g===c("WAWebDrawerViewType").FLYOUT?(j.end(),d("WAWebModalManager").ModalManager.open(k.jsx(d("WAWebModal.react").Modal,{type:d("WAWebModal.react").ModalTheme.Tower,children:k.jsx(d("WAWebDialerPadFlowLoadable").WAWebDialerPadFlowLoadable,{onEnd:function(){d("WAWebModalManager").ModalManager.close()},viewType:c("WAWebDrawerViewType").MODAL})}))):j.push(d("WAWebNewChatFlowTypes").NewChatFlowStep.DialerPadFlow)},s=function(){if(j.step===d("WAWebNewChatFlowTypes").NewChatFlowStep.NewContactFlow){var a;(a=i.current)==null||a.handleDismiss()}j.pop()};if(j.step==null)return null;var t=null;switch(j.step){case d("WAWebNewChatFlowTypes").NewChatFlowStep.NewChatDrawer:t=k.jsx(c("WAWebNewChatDrawer.react"),{title:h._(/*BTDS*/"New chat"),onBack:function(){return j.end()},onClick:a,onNewGroup:o,onNewCommunity:p,onNewContact:q,onDialerPad:r,viewType:g!=null?g:c("WAWebDrawerViewType").DRAWER});break;case d("WAWebNewChatFlowTypes").NewChatFlowStep.NewGroupFlow:t=k.jsx(d("WAWebNewGroupFlowLoadable").NewGroupFlowLoadable,{onCreateGroup:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield a,j.end()});return function(b){return a.apply(this,arguments)}}(),onEnd:j.pop,viewType:g!=null?g:c("WAWebDrawerViewType").DRAWER});break;case d("WAWebNewChatFlowTypes").NewChatFlowStep.NewCommunityFlow:t=k.jsx(c("WAWebNewCommunityInfoDrawer.react"),{onBack:j.pop,onCreateCommunity:g===c("WAWebDrawerViewType").MODAL?j.end:void 0,viewType:g!=null?g:c("WAWebDrawerViewType").DRAWER});break;case d("WAWebNewChatFlowTypes").NewChatFlowStep.NewContactFlow:t=k.jsx(c("WAWebContactEditDrawer.react"),{ref:i,origin:d("WAWebContactLogging").ContactSourceType.NewChat,onSave:n,onBack:j.pop,viewType:g!=null?g:c("WAWebDrawerViewType").DRAWER});break;case d("WAWebNewChatFlowTypes").NewChatFlowStep.DialerPadFlow:t=k.jsx(d("WAWebDialerPadFlowLoadable").WAWebDialerPadFlowLoadable,{onEnd:j.pop,viewType:g!=null?g:c("WAWebDrawerViewType").DRAWER});break}return k.jsx(e,{ref:f,flow:j,requestDismiss:s,children:t})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);